<div data-controller="heatmap--featurematrix" data-heatmap--featurematrix-features='<%= @features %>'>
  <div class="row">
    <div class="m-4 col-md-2">
      <div>
        <%= form_with url: featurematrix_path, method: :get do |form| %>
          <%= form.label 'Select dataset:', {}, class: 'me-2 form-control-label' %>
          <%= form.select :dataset, @data_options, { selected: params[:dataset] }, class: 'me-2 form-select', onchange: 'this.form.submit()' %>
        <% end %>
      </div>

      <hr>

      <div class="mt-2">
        <label class="me-2 form-control-label" for="matrixSearch">Matrix Search:</label>
        <input class="form-control" id="matrixSearch" type="number" autocomplete="off" placeholder="Enter a number (e.g. 0.5)" data-action="keyup->heatmap--featurematrix#searchMatrix">
        <div class="mt-2 d-flex justify-content-end">
          <button class="m-0 btn btn-primary" data-action="heatmap--featurematrix#clearLowlights">Reset</button>
        </div>
      </div>
    </div>

    <div class="mt-4 col matrix-container" id="matrix-container">
      <div></div>
      <div class="matrix" id="matrix"></div>
      <div class="matrix-legend" id="legend" style="visibility: hidden">
        <div class="bar" id="legend-bar"></div>
        <div class="text-grid" id="legend-text">
          <div class="text" style="align-items: start;">
            <div>1</div>
          </div>
          <div class="text" style="align-items: center;">
            <div>0</div>
          </div>
          <div class="text" style="align-items: end;">
            <div>-1</div>
          </div>
        </div>
      </div>
      <div></div>
    </div>
  </div>
</div>